## Dynamic Multi-level AutoScaling Strategy (DMAS)

### 1. 简介

我们在使用简单扩展或者目标扩展策略时经常会遇到这样的问题，策略不够贴合实际业务场景，并且有严重的延迟。
这些策略只会响应现有规则，如果用户想要在不同场景下进行进行特定操作，则必须花费大量时间在配置策略上，另一个问题是用
户必须等待监控指标的数据才能进行扩展，因此响应时间会有延迟。

为了实现更快、更准确的响应，我们向您推荐我们的动态多级自动扩展策略（DMAS）。在时间序列预测和多级指标支持下，DMAS将为您提供更快、更准确的结果。

### 2. 如何工作

#### 多级指标： 
DMAS将根据机器层和应用程序层的指标来评估当前负载情况。通常CPU负载的变化反映了请求的服务和提供的服务之间的变化，而通过收集负载均衡器上的请求数和响应时间等数据，我们将有了更多层级的依据来决定容量是否需要扩展。 

#### 预测算法:
DMAS的另一个特点是能在实际扩展前提前预测扩展需求，这样SpoTainer将有充足的时间来启动和设置新实例。通过对不同流量模式进行分类，DMAS将应用不同的时间序列预测模型来生成最准确的预测。 

### 3. DMAS vs.目标扩展策略

- DMAS不仅使用了机器层的监控数据，还使用了应用程序层的监控数据。 
- 预测算法使SpoTainer能够预测您的工作负载何时会增加，以提前扩展实例以降低延迟，满足您的业务需求。 
- 与目标扩展策略相比，DMAS 可以提升75%的反应速度，以及在目标扩展策略的基础上额外节省10-15%。 （该结果来源于实验数据，具体节省幅度以实际情况为准） 

### 4. 如何使用

1. 在创建SpoTainer组时，跳转到“扩展设置”标签页. 
2. 在DMAS 策略下, 填写以下选项: 
   1. 策略名称：您的DMAS策略名称 
   2. 指标目标值配置： 
      1. CPU利用率：SpoTainer组内需要使用的CPU资源
      2. 响应时间：特定目标组的最大响应时间，一旦该实际值大于目标值，将会触发扩展动作。
      3. 冷却时间：每次扩展动作后需要等待的时间 
      
![img](/_images/dmas-configuration.png)

   *当设置了较小的响应时间阈值时， 建议使用较长的冷却时间。
   
   *要求至少输入一个响应时间阈值，我们也支持添加多个阈值 
3. 保存和应用配置，点击下一步，并点击创建。 